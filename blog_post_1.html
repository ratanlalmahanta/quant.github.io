<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quant Dashboard Pro</title>

<!-- Google Fonts & Font Awesome -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<!-- Plotly -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<style>
:root {
    --primary: #2563eb;
    --secondary: #374151;
    --bg-light: #f4f6f8;
    --bg-dark: #1f2937;
    --text-light: #ffffff;
    --text-dark: #111827;
}
body {
    margin: 0;
    font-family: 'Roboto', sans-serif;
    background: var(--bg-light);
    color: var(--text-dark);
    transition: all 0.3s;
}
body.dark {
    background: var(--bg-dark);
    color: var(--text-light);
}
.sidebar {
    height: 100vh;
    width: 250px;
    position: fixed;
    top: 0;
    left: 0;
    background-color: var(--secondary);
    padding-top: 20px;
    transition: width 0.3s;
}
.sidebar a {
    display: flex;
    align-items: center;
    padding: 15px 20px;
    text-decoration: none;
    font-size: 18px;
    color: #d1d5db;
    transition: 0.2s;
    border-radius: 8px;
    margin: 5px 10px;
}
.sidebar a i { margin-right: 10px; }
.sidebar a:hover { background-color: #4b5563; color: #fff; }
.main { margin-left: 260px; padding: 20px; }
.section { display: none; animation: fadeIn 0.5s; }
.section.active { display: block; }
@keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }

.app-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 20px;
    margin-top: 20px;
}
.app-card {
    background: linear-gradient(145deg, #fff, #e0e7ff);
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    text-align: center;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s, background 0.3s;
    position: relative;
}
body.dark .app-card {
    background: linear-gradient(145deg, #374151, #1f2937);
}
.app-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
}
.app-card i { font-size: 40px; margin-bottom: 10px; color: var(--primary); }
.status-badge {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: gray;
}
.status-online { background: #22c55e; }
.status-offline { background: #ef4444; }

/* Modal Login */
.modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0;
    width: 100%; height: 100%; background: rgba(0,0,0,0.6);
    justify-content: center; align-items: center;
}
.modal-content {
    background: #fff; padding: 30px; border-radius: 12px;
    width: 400px; max-width: 90%; text-align: center;
}
.modal-content input {
    width: 80%; padding: 10px; margin: 10px 0;
    border-radius: 6px; border: 1px solid #ccc;
}
.modal-content button {
    padding: 10px 20px; background: var(--primary);
    color: #fff; border: none; border-radius: 6px; cursor: pointer;
}
.modal-content button:hover { background: #1d4ed8; }

/* Chart container */
#chartContainer { width: 100%; height: 400px; margin-top: 20px; }
</style>
</head>
<body>

<div class="sidebar">
    <a href="#" onclick="showSection('home')"><i class="fas fa-home"></i> Home</a>
    <a href="#" onclick="showSection('apps')"><i class="fas fa-th-large"></i> Apps</a>
    <a href="#" onclick="showSection('analytics')"><i class="fas fa-chart-line"></i> Analytics</a>
    <a href="#" onclick="showSection('reports')"><i class="fas fa-file-alt"></i> Reports</a>
    <a href="#" onclick="showSection('settings')"><i class="fas fa-cog"></i> Settings</a>
    <a href="#" onclick="showSection('help')"><i class="fas fa-question-circle"></i> Help</a>
    <a href="#" id="loginBtn" onclick="openLoginModal()"><i class="fas fa-user"></i> Login</a>
    <a href="#" onclick="toggleTheme()"><i class="fas fa-adjust"></i> Toggle Theme</a>
</div>

<div class="main">
    <div id="home" class="section active">
        <h1>Welcome to Quant Dashboard Pro</h1>
        <p>Explore apps, analytics, and reports with real-time insights.</p>
    </div>

    <div id="apps" class="section">
        <h2>Streamlit Apps</h2>
        <div class="app-grid" id="appGrid"></div>
    </div>

    <div id="analytics" class="section">
        <h2>Analytics</h2>
        <div id="chartContainer"></div>
    </div>

    <div id="reports" class="section">
        <h2>Reports</h2>
        <p>Download reports and CSV files here.</p>
    </div>

    <div id="settings" class="section">
        <h2>Settings</h2>
        <p>Adjust dashboard preferences and themes.</p>
    </div>

    <div id="help" class="section">
        <h2>Help</h2>
        <p>Documentation, tutorials, and support links.</p>
    </div>
</div>

<div class="modal" id="loginModal">
    <div class="modal-content">
        <h2>Login</h2>
        <input type="text" id="username" placeholder="Username"><br>
        <input type="password" id="password" placeholder="Password"><br>
        <button onclick="login()">Login</button>
    </div>
</div>

<script>
const appGrid = document.getElementById('appGrid');

// Create 20 apps (ports 8501 - 8520)
const runningApps = Array.from({length:21}, (_,i)=> i+1);

runningApps.forEach(i => {
    const port = 8500 + i; // Correct port: 8501, 8502 ... 8520
    const card = document.createElement('div');
    card.className = 'app-card';
    card.innerHTML = `
        <i class="fas fa-rocket"></i>
        <h3>App ${i}</h3>
        <div class="status-badge" id="status${i}"></div>
    `;
    card.onclick = () => window.open(`http://192.168.31.38:${port}/`, '_blank');
    appGrid.appendChild(card);

    // Status check
    fetch(`http://192.168.31.38:${port}/`)
        .then(r => document.getElementById(`status${i}`).classList.add('status-online'))
        .catch(err => document.getElementById(`status${i}`).classList.add('status-offline'));
});

// Section switching
function showSection(id){
    document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
    document.getElementById(id).classList.add('active');
}

// Login
const loginModal = document.getElementById('loginModal');
function openLoginModal(){ loginModal.style.display='flex'; }
window.onclick = e => { if(e.target==loginModal) loginModal.style.display='none'; }
function login(){
    const user=document.getElementById('username').value;
    const pass=document.getElementById('password').value;
    if(user==='admin' && pass==='password'){
        alert('Login successful');
        loginModal.style.display='none';
        document.getElementById('loginBtn').innerText='Logout';
        document.getElementById('loginBtn').onclick=()=>{location.reload()};
    }else{ alert('Invalid credentials'); }
}

// Theme toggle
function toggleTheme(){ document.body.classList.toggle('dark'); }

// Plotly Chart
const chartData = [{
    x: ['Jan','Feb','Mar','Apr','May','Jun'],
    y: [10,15,13,17,22,19],
    type: 'scatter',
    mode: 'lines+markers',
    marker: {color:'#2563eb'}
}];
const layout = {title:'Sample Analytics', paper_bgcolor:'rgba(0,0,0,0)', plot_bgcolor:'rgba(0,0,0,0)'};
Plotly.newPlot('chartContainer', chartData, layout, {responsive:true});
</script>
</body>
</html>
